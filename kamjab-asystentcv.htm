
<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Kreator CV Kamila Jabłońskiego z Pełną Ochroną i Atrakcyjnymi Opcjami</title>
<style>
  body { font-family: Arial, sans-serif; background: #f0f4f8; padding: 20px; max-width: 900px; margin: auto; }
  h1, h2 { color: #1a3c72; }
  label { display: block; margin-top: 12px; font-weight: bold; }
  input[type=text], input[type=tel], input[type=email], textarea, select {
    width: 100%; padding: 8px; margin-top: 6px; border-radius: 5px; border: 1px solid #aaa; font-size: 1rem; resize: vertical;
  }
  textarea { min-height: 80px; }
  .section { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px #bfd3ef; margin-bottom: 25px; }
  button { background-color: #1a3c72; color: white; border: none; border-radius: 5px; padding: 12px 18px; cursor: pointer; font-size: 1rem; }
  button:hover { background-color: #14509f; }
  #cvPreview { background: #fff; border-radius: 8px; padding: 20px; box-shadow: 0 0 12px #7a9bdc; font-family: 'Courier New', monospace; white-space: pre-wrap; margin-top: 20px;}
  .info-tip { background-color: #e1e9fc; border-left: 6px solid #1a3c72; padding: 10px 15px; margin-top: 6px; border-radius: 4px; font-size: 0.9rem; color: #1a3c72;}
  .char-count { font-size: 0.8rem; color: #666; float: right; }
  .flex { display: flex; gap: 20px; flex-wrap: wrap; }
  .flex > div { flex: 1 1 250px; min-width: 250px; }
  .checkbox-group label { font-weight: normal; }
  .risk-score { font-weight: 700; font-size: 1.1rem; color: #d9534f; margin-top: 10px; }
</style>
</head>
<body>

<h1>Kreator CV Kamila Jabłońskiego z Pełną Ochroną i Zaawansowanymi Opcjami</h1>
<p>Ten kreator poprowadzi Cię krok po kroku do stworzenia CV, które buduje zaufanie, spełnia wymogi RODO i zwiększa Twoje szanse na zatrudnienie.</p>

<div class="section" id="personalSection">
  <h2>Dane osobowe i kontaktowe</h2>
  <div class="flex">
    <div>
      <label for="name">Imię i nazwisko</label>
      <input type="text" id="name" maxlength="50" value="Kamil Jabłoński" />
      <span class="char-count" id="nameCount">50 znaków max</span>
    </div>
    <div>
      <label for="location">Miejsce zamieszkania</label>
      <input type="text" id="location" maxlength="50" value="Niemcza" />
      <span class="char-count" id="locationCount">50 znaków max</span>
    </div>
  </div>
  <div class="flex">
    <div>
      <label for="phone">Telefon</label>
      <input type="tel" id="phone" maxlength="15" placeholder="+48 502 767 157" value="+48 502 767 157" />
      <span class="char-count" id="phoneCount">15 znaków max</span>
      <div class="info-tip">Podaj numer w formacie +48 123 456 789</div>
    </div>
    <div>
      <label for="email">E-mail</label>
      <input type="email" id="email" maxlength="50" placeholder="adres@mail.com" value="Kam.Jab@yahoo.com" />
      <span class="char-count" id="emailCount">50 znaków max</span>
      <div class="info-tip">Podaj poprawny adres e-mail</div>
    </div>
  </div>
</div>

<div class="section" id="summarySection">
  <h2>Podsumowanie zawodowe (max 300 znaków)</h2>
  <textarea id="summary" maxlength="300">Gwarantuję sumienność i pełne zaangażowanie. Jestem mieszkańcem Niemczy, gotowy od zaraz podjąć pracę fizyczną i szybko wdrożyć się w nowe obowiązki. Szanuję swój czas i czas pracodawcy, dlatego punktualność i rzetelność to dla mnie podstawa.</textarea>
  <span class="char-count" id="summaryCount">300 znaków max</span>
  <div class="info-tip">Użyj mocnych, zobowiązujących określeń, np. „Gwarantuję”, „punktualność” i „rzetelność”.</div>
</div>

<div class="section" id="strengthsSection">
  <h2>Moje Atuty (zaznacz i dopisz inne)</h2>
  <div class="checkbox-group">
    <label><input type="checkbox" class="strength" value="Gotowość do pracy od zaraz, również w systemie zmianowym i weekendy." checked> Gotowość i dostępność</label>
    <label><input type="checkbox" class="strength" value="Posiadam czynne prawo jazdy kat. B i własny transport, co gwarantuje niezawodność i punktualność." checked> Mobilność</label>
    <label><input type="checkbox" class="strength" value="Doskonała kondycja fizyczna pozwala mi wykonywać zadania wymagające siły i wytrzymałości." checked> Siła i wytrzymałość</label>
    <label><input type="checkbox" class="strength" value="Szybko się uczę i dążę do samodzielności." checked> Szybkie uczenie się</label>
  </div>
  <label for="otherStrengths">Inne atuty (opcjonalnie)</label>
  <textarea id="otherStrengths" maxlength="200" placeholder="Np. zaangażowanie, punktualność, dyspozycyjność"></textarea>
  <span class="char-count" id="otherStrengthsCount">200 znaków max</span>
</div>

<div class="section" id="experienceSection">
  <h2>Doświadczenie zawodowe (opcjonalne)</h2>
  <textarea id="experience" maxlength="500" placeholder="Opisz swoje doświadczenie lub pozostaw puste, jeśli brak."></textarea>
  <span class="char-count" id="experienceCount">500 znaków max</span>
</div>

<div class="section" id="educationSection">
  <h2>Wykształcenie (opcjonalne)</h2>
  <textarea id="education" maxlength="300" placeholder="Wpisz swoje wykształcenie lub pozostaw puste."></textarea>
  <span class="char-count" id="educationCount">300 znaków max</span>
</div>

<div class="section" id="referencesSection">
  <h2>Referencje (opcjonalne)</h2>
  <textarea id="references" maxlength="300" placeholder="Dane osób polecających lub wpisz 'Dostępne na życzenie'"></textarea>
  <span class="char-count" id="referencesCount">300 znaków max</span>
</div>

<div class="section" id="foundationSection">
  <h2>Fundament mojej pracy</h2>
  <textarea id="foundation" maxlength="400">Na mnie można polegać. Zawsze kończę to, co zacząłem. Działam w sposób transparentny i zgodny z zasadami. Dobrze radzę sobie z powtarzalnymi zadaniami i utrzymuję koncentrację.</textarea>
  <span class="char-count" id="foundationCount">400 znaków max</span>
  <div class="info-tip">Podkreśl swoje wartości i postawę, która daje gwarancję pracodawcy.</div>
</div>

<div class="section" id="rodoSection">
  <h2>Klauzula RODO</h2>
  <textarea id="rodoClause" rows="4" maxlength="700">Wyrażam zgodę na przetwarzanie moich danych osobowych przez [nazwa firmy] w celu prowadzenia rekrutacji na aplikowane przeze mnie stanowisko zgodnie z ustawą z dnia 10 maja 2018 r. o ochronie danych osobowych (Dz. U. 2018, poz. 1000) oraz Rozporządzeniem Parlamentu Europejskiego i Rady (UE) 2016/679 (RODO).</textarea>
  <label for="companyName">Nazwa firmy (uzupełnia klauzulę):</label>
  <input type="text" id="companyName" maxlength="100" placeholder="Wpisz nazwę firmy" />
  <div class="info-tip">Możesz dodać zgodę na przetwarzanie danych również na potrzeby przyszłych rekrutacji.</div>
  <label><input type="checkbox" id="futureRecruitmentConsent"> Wyrażam zgodę na przetwarzanie danych osobowych również na potrzeby przyszłych rekrutacji</label>
</div>

<div class="section" id="messageSection">
  <h2>Wzory wiadomości kontaktowych</h2>
  <label for="messageType">Wybierz rodzaj wiadomości:</label>
  <select id="messageType">
    <option value="olx">Wiadomość OLX / Facebook</option>
    <option value="sms">Wiadomość SMS</option>
  </select>
  <textarea id="messageText" rows="6" readonly></textarea>
  <button id="copyMessage">Kopiuj wiadomość do schowka</button>
</div>

<div class="section" id="riskSection">
  <h2>Test zaufania: Obawy pracodawcy (punktacja i porady)</h2>
  <p>Oceń swoje odpowiedzi, aby zminimalizować obawy pracodawcy:</p>
  <label><input type="checkbox" class="riskCheck" value="1"> Dam z siebie wszystko każdego dnia pracy (zaangażowanie)</label><br/>
  <label><input type="checkbox" class="riskCheck" value="1"> Mam niezawodny transport i punktualność</label><br/>
  <label><input type="checkbox" class="riskCheck" value="1"> Jestem słowny i dotrzymuję terminów</label><br/>
  <label><input type="checkbox" class="riskCheck" value="1"> Potrafię szybko się uczyć i adaptować</label><br/>
  <button id="calcRisk">Oblicz ryzyko i zobacz rekomendacje</button>
  <div class="risk-score" id="riskScore"></div>
  <div id="riskAdvice" style="margin-top: 10px;"></div>
</div>

<button id="generateCV">Generuj i pokaż podgląd CV</button>

<div id="cvPreview"></div>

<div style="margin-top: 20px;">
  <button id="downloadPDF">Pobierz CV w PDF</button>
  <button id="downloadDOCX">Pobierz CV w DOCX</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/docx/7.2.1/docx.umd.js"></script>

<script>
  // Liczenie pozostałych znaków
  function updateCharCount(id, countId, maxLen) {
    const field = document.getElementById(id);
    const count = field.value.length;
    const span = document.getElementById(countId);
    span.textContent = \`\${maxLen - count} znaków pozostało\`;
  }

  ['name','location','phone','email','summary','otherStrengths','experience','education','references','foundation','companyName','rodoClause'].forEach(id => {
    let countId = id+'Count';
    let maxLen = parseInt(document.getElementById(id)?.getAttribute('maxlength')) || 100;
    if(document.getElementById(id) && document.getElementById(countId)) {
      document.getElementById(id).addEventListener('input', () => updateCharCount(id, countId, maxLen));
      updateCharCount(id, countId, maxLen);
    }
  });
  
  // Wiadomości kontaktowe wzory
  const messageTemplates = {
    olx: `Dzień dobry,
Nazywam się Kamil Jabłoński. Piszę w sprawie Państwa ogłoszenia o pracę na stanowisko [Nazwa stanowiska].
Jestem z Niemczy, mam prawo jazdy i jestem gotowy do pracy od zaraz. Moje CV przesyłam w załączniku.
Jestem dostępny pod telefonem +48 502 767 157. Chętnie odpowiem na pytania lub spotkam się na krótkiej rozmowie.
Z poważaniem,
Kamil Jabłoński`,
    sms: `Dzień dobry. Nazywam się Kamil Jabłoński, dzwonię w sprawie pracy dla [Nazwa stanowiska] z portalu OLX. Jestem z Niemczy i dostępny od zaraz. Czy to dobra chwila na rozmowę?`
  };
  function updateMessage() {
    const type = document.getElementById('messageType').value;
    document.getElementById('messageText').value = messageTemplates[type];
  }
  document.getElementById('messageType').addEventListener('change', updateMessage);
  updateMessage();
  document.getElementById('copyMessage').addEventListener('click', () => {
    navigator.clipboard.writeText(document.getElementById('messageText').value).then(() => {
      alert("Wiadomość skopiowana do schowka.");
    });
  });

  // Generowanie tekstu CV z formatu
  function generateCVText() {
    const name = document.getElementById('name').value.trim();
    const location = document.getElementById('location').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const email = document.getElementById('email').value.trim();
    const summary = document.getElementById('summary').value.trim();
    const strengthsElements = [...document.querySelectorAll('.strength:checked')];
    const strengths = strengthsElements.map(el => el.value);
    const otherStrengths = document.getElementById('otherStrengths').value.trim();
    if(otherStrengths) strengths.push(otherStrengths);
    const experience = document.getElementById('experience').value.trim();
    const education = document.getElementById('education').value.trim();
    const references = document.getElementById('references').value.trim();
    const foundation = document.getElementById('foundation').value.trim();

    let rodoClause = document.getElementById('rodoClause').value.trim();
    const companyName = document.getElementById('companyName').value.trim();
    if(companyName.length) {
      rodoClause = rodoClause.replace('[nazwa firmy]', companyName);
    }
    if(document.getElementById('futureRecruitmentConsent').checked) {
      rodoClause += '\\nWyrażam zgodę na przetwarzanie moich danych osobowych również na potrzeby przyszłych rekrutacji.';
    }

    return \`
\${name}
Konkretny i słowny pracownik z \${location}
tel: \${phone} | e-mail: \${email}

Podsumowanie
\${summary}

Moje Atuty – Co wnoszę do firmy?
\${strengths.map(s => '- ' + s).join('\\n')}

\${experience ? 'Doświadczenie zawodowe:\n' + experience + '\\n' : ''}
\${education ? 'Wykształcenie:\n' + education + '\\n' : ''}
\${references ? 'Referencje:\n' + references + '\\n' : ''}

Fundament mojej pracy
\${foundation}

Klauzula RODO
\${rodoClause}
\`.trim();
  }

  // Podgląd CV
  function updateCVPreview() {
    const cvText = generateCVText();
    document.getElementById('cvPreview').textContent = cvText;
  }
  document.getElementById('generateCV').addEventListener('click', updateCVPreview);
  updateCVPreview();

  // Eksport PDF z formatowaniem (użycie jsPDF z dodatkami)
  document.getElementById('downloadPDF').addEventListener('click', () => {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    const cvText = generateCVText();

    const lines = doc.splitTextToSize(cvText, 180);
    let y = 10;
    const lineHeight = 7;
    doc.setFont("Courier", "normal");
    doc.setFontSize(11);
    for (const line of lines) {
      if (y > 280) {
        doc.addPage();
        y = 10;
      }
      doc.text(line, 10, y);
      y += lineHeight;
    }
    doc.save("CV_Kamil_Jablonski.pdf");
  });

  // Eksport DOCX (docx library)
  document.getElementById('downloadDOCX').addEventListener('click', async () => {
    const { Document, Packer, Paragraph, TextRun } = window.docx;
    const cvText = generateCVText();
    const paragraphs = [];
    cvText.split('\\n').forEach(line => {
      if(line.trim() === '') {
        paragraphs.push(new Paragraph(''));
      } else {
        paragraphs.push(new Paragraph({
          children: [new TextRun(line.trim())]
        }));
      }
    });

    const doc = new Document({
      sections: [{
        properties: {},
        children: paragraphs
      }]
    });

    const blob = await Packer.toBlob(doc);
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'CV_Kamil_Jablonski.docx';
    a.click();
    URL.revokeObjectURL(url);
  });

  // Mechanizm zapisu do Local Storage
  function saveAllToStorage() {
    const data = {};
    ['name','location','phone','email','summary','otherStrengths','experience','education','references','foundation','rodoClause','companyName','futureRecruitmentConsent'].forEach(id => {
      if(id === 'futureRecruitmentConsent'){
        data[id] = document.getElementById(id).checked;
      } else {
        const el = document.getElementById(id);
        if(el) data[id] = el.value;
      }
    });
    // Strengths
    data.strengths = [...document.querySelectorAll('.strength')].map(chk => chk.checked);
    localStorage.setItem('cvKamilData', JSON.stringify(data));
  }

  function loadAllFromStorage() {
    const data = JSON.parse(localStorage.getItem('cvKamilData') || '{}');
    if(!data) return;
    ['name','location','phone','email','summary','otherStrengths','experience','education','references','foundation','rodoClause','companyName','futureRecruitmentConsent'].forEach(id => {
      if(id === 'futureRecruitmentConsent' && typeof data[id] === 'boolean') {
        document.getElementById(id).checked = data[id];
      } else if(data[id]) {
        const el = document.getElementById(id);
        if(el) el.value = data[id];
      }
    });
    // Strengths
    const strengths = document.querySelectorAll('.strength');
    if(data.strengths && Array.isArray(data.strengths) && strengths.length === data.strengths.length){
      strengths.forEach((chk, i) => chk.checked = data.strengths[i]);
    }
  }

  // Save data on any change with debounce to avoid performance issues
  let saveTimeout;
  document.querySelectorAll('input, textarea, select').forEach(el => {
    el.addEventListener('input', () => {
      clearTimeout(saveTimeout);
      saveTimeout = setTimeout(() => {
        saveAllToStorage();
      }, 300);
    });
  });

  window.onload = () => {
    loadAllFromStorage();
    updateCVPreview();
  };

  // Ryzyko i porady
  document.getElementById('calcRisk').addEventListener('click', () => {
    const checks = document.querySelectorAll('.riskCheck:checked').length;
    const max = document.querySelectorAll('.riskCheck').length;
    const risk = max - checks;
    const riskScore = document.getElementById('riskScore');
    const advice = document.getElementById('riskAdvice');
    if(risk === 0){
      riskScore.textContent = 'Twoje ryzyko jest minimalne — jesteś idealnym kandydatem!';
      advice.textContent = 'Doskonała postawa i przygotowanie — utrzymuj swoje atuty.';
    } else if(risk <= 1){
      riskScore.textContent = 'Niskie ryzyko. Kilka rzeczy możesz poprawić.';
      advice.textContent = 'Zwróć uwagę na punktualność i podtrzymuj motywację.';
    } else if(risk <= 3){
      riskScore.textContent = 'Umiarkowane ryzyko. Warto popracować nad zaangażowaniem i dyspozycyjnością.';
      advice.textContent = 'Zadbaj o niezawodny transport i konsekwencję w pracy.';
    } else {
      riskScore.textContent = 'Wysokie ryzyko. Zastanów się nad motywacją i logistyką.';
      advice.textContent = 'Staraj się eliminować bariery i zwiększać swój profesjonalizm.';
    }
  });
</script>

</body>
</html>
